<div class="container">
    <div class="filter-section">
        <mat-form-field appearance="outline">
            <input matInput placeholder="Search..." [formControl]="searchControl">
            <mat-icon matPrefix>search</mat-icon>
        </mat-form-field>

        <select [(ngModel)]="selectedCategory" (ngModelChange)="onCategoryChange($event)" class="category-select">
            <option value="">All Categories</option>
            @for (category of categories(); track category) {
            <option [value]="category">
                {{category | capitalize}}
            </option>
            }
        </select>
    </div>

    @if (loading()) {
    <div class="spinner-container">
        <mat-spinner></mat-spinner>
    </div>
    }

    <div class="products-grid" @staggerFade>
        @for (product of filteredProducts(); track product.id) {
        <app-product [product]="product" (addToCart)="addToCart($event)">
        </app-product>
        }
    </div>
</div>